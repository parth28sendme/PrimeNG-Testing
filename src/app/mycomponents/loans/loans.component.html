<div class="col-12">
    <div class="title py-2">
       <h4>Loans</h4>
    </div>
</div>


<div class="row">
    <div class="col-12 ">
        <div class="filters-container">      
          <p-dropdown  [options]="branches" [(ngModel)]="selectedBranch" optionLabel="location" placeholder="Select a Branch"
          [filter]="true">
        </p-dropdown>

        <p-dropdown  [options]="status" [(ngModel)]="statusName" optionLabel="name" placeholder="Select a Status"
        [filter]="true">
        </p-dropdown>
          <button class="btn btn-success btn-light-success waves-effect waves-light">
            <i class="pi pi-search" style="font-size: 0.8rem"></i>
          </button>
  
          <button class="btn btn-secondary waves-effect ml-1">
            <i class="pi pi-replay" style="font-size: 0.8rem"></i>
          </button>
        </div>
    </div>
  </div>


  <div class="row mt-5 mb-1">
    <div class="col-12 d-flex justify-content-start gap-2">
    
      <button class="excel-btn"  style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
        <i class="pi pi-file-excel"></i>
        <span>EXCEL</span>
      </button>

    </div>
  </div>





  <div class="col-12 mt-1">
    <div class="card">
    <p-table [value]="loanData" [paginator]="true" [rows]="10" [responsiveLayout]="'scroll'">
    <ng-template pTemplate="header" styleClass="p-datatable-striped" class="p-table-striped">
      <tr>
        <th></th>
        <th></th>
        <th>Loan ID</th>
        <th>Loan Type</th>
        <th>Amount</th>
        <th>Interest Rate (%)</th>
        <th>Tenure (Years)</th>
        <th>Branch</th>
        <th>Disbursed Date</th>
        <th>Status</th>
        <th>Processed</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData>
      <tr class="ml-5">
        <th>
          <button (click)="displayDialog()" class="btn btn-primary ml-5" style="margin-left: 20%;">
            <i class="pi pi-pencil" style="font-size: 0.8rem"></i>
          </button>
        </th>
        <th>
          <button class="btn btn-danger">
            <i class="pi pi-trash" style="font-size: 0.8rem"></i>
          </button>
        </th>
        <td>{{ rowData.loanId }}</td>
        <td>{{ rowData.loanType }}</td>
        <td>â‚¹{{ rowData.amount | number }}</td>
        <td>{{ rowData.interestRate }}%</td>
        <td>{{ rowData.tenureYears }}</td>
        <td>{{ rowData.branch }}</td>
        <td>{{ rowData.disbursedDate || 'N/A' }}</td>
        <td>
          <span 
            class="status-pill"
            [ngStyle]="{
              'background-color': getColor(rowData.status ?? 0)
            }">
            {{ rowData.status }}
          </span>
        </td>

        <td>
          <i class="pi" 
             [ngClass]="rowData.processed ? 'pi-check-circle text-success' : 'pi-times-circle text-danger'" 
             style="font-size: 1.2rem"></i>
        </td>
        
      </tr>
    </ng-template>
    </p-table>
    </div>
    </div>
  